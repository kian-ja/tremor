function reflexAmplitude = pulseReflexAmplitude(position,torque,threshold,reflexAmplitude)
positionDiff = diff(position);
positionDiff = max(positionDiff,0);
largeVelocityIndex = find(positionDiff>threshold);
largeVelocityIndexDiff = diff(largeVelocityIndex);
falseJumpIndex = find(largeVelocityIndexDiff == 1);
falseJumpIndex = falseJumpIndex + 1;
largeVelocityIndex(falseJumpIndex) = [];
reflexOnsetIndex = largeVelocityIndex + 40;
reflexEndIndex = largeVelocityIndex + 600;
numPulses = length(reflexOnsetIndex);
reflexAmplitudesThisTrial = zeros(numPulses,1);
for i = 1 : numPulses
    reflexAmplitudeThisTrial = torque
end
reflexAmplitude = [reflexAmplitude;reflexAmplitudesThisTrial];